{% extends 'base.html' %}
{% block header %}
  <h3>{% block title %}Profile{% endblock %}</h3>
  {% if g.user %}
    <a class="action" href="{{ url_for('question.create') }}">New question</a>
  {% endif %}
  <script>
     document.getElementById("defaultOpen").click();

    </script>
  <style type="text/css">
.tabs {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
  margin-top:5%;
}

.tabs button {
  background-color: inherit;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

.tabs button:hover {
  background-color: #ddd;
}

.tabs button.active {
  background-color: #ccc;
}
.tabcontent {
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
.tabcontent {
    animation: fadeEffect 1s; /* Fading effect takes 1 second */
}

/* Go from zero to full opacity */
@keyframes fadeEffect {
    from {opacity: 0;}
    to {opacity: 1;}
}

    </style>

  {% endblock %}
{%block content%}
<br>
<table align="center" width="70%" height="50%">
  {% for row in result %}
      <tr><td><h4>ID:</h4></td><td> <h4>{{ row['id'] }}</h4></td></tr>
      <tr><td><h4>Username:</h4></td><td><h4>{{row['Username']}}</h4></td></td></tr>
      
      <tr><td><h4>Description:</h4></td><td><h4>{{row['description']}}</h4></td><td>
      {% if g.user['id']==row['id'] %}  
       <a class="action" href="{{ url_for('auth.update_profile',id=g.user['id']) }}">Update</a>
      {% endif %}
      </td></tr>
      <tr><td><h4>Reputation:</h4></td><td><h4>{{row['reputation']}}</h4></td></tr>
      <tr><td>Profile Picture</td><td><img width="80px" height="80px" class="image-fluid" src="{{g.user['picture']}}"></td>
  {% endfor %}
  </table>


  <div class="tabs">
      <button class="tablinks"  onclick="open_tab(event, 'questions_asked')">Questions Asked</button>
      <button class="tablinks" onclick="open_tab(event, 'answers_answered')">Answeres answered</button>
  </div>
    

  <div id="questions_asked" class="tabcontent">
  {% for post in posts %}
    <article class="post">
      <header>
        <div>
          <h3><a class="action" href="{{ url_for('question.que', id=post['qid']) }}"> {{ post['title'] }}</a></h3>
          <div class="about">Asked on {{ post['created'].strftime('%Y-%m-%d') }}</div>
        </div>
      </header>
    </article>
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}
    </div>
    <div id="answers_answered" class="tabcontent" style="display: none;">
  {% for post in ans %}
    <article class="post">
      <header>
        <div>
          <h3><a class="action" href="{{ url_for('question.que', id=post['qid']) }}"> {{ post['title'] }}</a></h3>
          <div class="about">by {{ post['username'] }} on {{ post['created'].strftime('%Y-%m-%d') }}</div>
        </div>
      </header>
    </article>
    {% if not loop.last %}
      <hr>
    {% endif %}
  {% endfor %}
  </div>
  {% endblock %}
